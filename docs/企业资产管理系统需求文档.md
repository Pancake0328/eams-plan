# 企业资产管理系统（EAMS）需求文档

---

| 文档编号 | EAMS-REQ-001 |
|----------|--------------|
| 版本号   | V1.0.0       |
| 状态     | 正式发布     |
| 密级     | 内部         |

---

## 修订历史

| 版本   | 修订日期   | 修订人 | 修订内容       |
|--------|------------|--------|----------------|
| V0.1.0 | 2024-01-01 | 需求组 | 初稿           |
| V0.9.0 | 2024-03-01 | 需求组 | 完善各模块细节 |
| V1.0.0 | 2024-06-01 | 需求组 | 正式发布版本   |

---

## 目录

1. [文档概述](#1-文档概述)
2. [项目概述](#2-项目概述)
3. [用户角色与权限](#3-用户角色与权限)
4. [功能需求](#4-功能需求)
5. [非功能需求](#5-非功能需求)
6. [数据需求](#6-数据需求)
7. [接口需求](#7-接口需求)
8. [约束条件](#8-约束条件)

---

## 1. 文档概述

### 1.1 目的

本文档是企业资产管理系统（Enterprise Asset Management System，简称 EAMS）的需求规格说明书，旨在全面、准确地描述系统的功能需求、非功能需求、数据需求及接口需求，作为系统设计、开发、测试和验收的权威依据。

### 1.2 范围

本文档覆盖 EAMS 系统的全部功能模块，包括：系统管理、资产管理、生命周期管理、采购管理和统计分析（仪表盘）共五大模块，以及系统底层基础设施的需求描述。

### 1.3 读者对象

| 读者类型   | 阅读目的                         |
|------------|----------------------------------|
| 产品经理   | 确认需求范围与优先级             |
| 系统架构师 | 进行系统架构设计                 |
| 后端开发   | 按需求实现后端接口与业务逻辑     |
| 前端开发   | 按需求实现前端页面与交互         |
| 测试工程师 | 编写测试用例、执行功能与性能测试 |
| 项目经理   | 制定项目计划、管控需求变更       |
| 运维人员   | 了解系统架构及部署要求           |

### 1.4 术语与缩略语

| 术语/缩略语 | 说明                                           |
|-------------|------------------------------------------------|
| EAMS        | Enterprise Asset Management System，企业资产管理系统 |
| RBAC        | Role-Based Access Control，基于角色的访问控制  |
| JWT         | JSON Web Token，用于无状态认证的令牌标准       |
| AOP         | Aspect-Oriented Programming，面向切面编程      |
| CRUD        | Create/Read/Update/Delete，增删改查操作        |
| POI         | Apache POI，Java 操作 Office 文件的开源库      |
| SPA         | Single Page Application，单页面应用            |
| API         | Application Programming Interface，应用程序接口 |

### 1.5 参考资料

- Spring Boot 3.1.5 官方文档
- Vue 3 官方文档
- Apache POI 官方文档
- 《软件需求规格说明书编写规范》（GB/T 9385-2008）
- 企业内部固定资产管理制度

---

## 2. 项目概述

### 2.1 项目背景

随着企业规模的不断扩大，企业所拥有的固定资产数量日益增多，种类日趋复杂，分布也越来越分散。传统的手工台账、纸质单据管理方式已严重滞后于企业发展需求，主要体现在：

1. **信息孤岛严重**：各部门分散管理，资产数据无法整合共享，难以形成全局视图；
2. **流程不透明**：资产的申请、审批、调拨、报废等流程依赖线下纸质单据，审批周期长、流程不可追溯；
3. **盘点效率低下**：定期盘点依赖人工逐一核对，耗时费力，误差率高；
4. **资产利用率低**：缺乏系统性数据支撑，无法有效分析资产分布与使用状态，造成重复采购或资产闲置浪费；
5. **合规风险高**：资产记录不完整、变动历史缺失，难以满足财务审计与监管合规要求。

为解决上述问题，企业决定建设一套统一的企业资产管理系统（EAMS），实现资产全生命周期的数字化、流程化、智能化管理。

### 2.2 项目目标

EAMS 系统建设的核心目标如下：

1. **建立资产台账**：实现全企业固定资产的统一登记、分类、编码与档案管理，确保账实相符；
2. **规范业务流程**：通过系统化流程管控资产的采购申请、入库验收、分配使用、调拨转移、报修维修、盘点核查、报废处置等全生命周期业务，消除人为干预；
3. **实现权限管控**：基于 RBAC 模型实现精细化权限管控，确保不同角色人员只能操作其权限范围内的功能与数据；
4. **提升盘点效率**：通过系统支持周期性盘点计划的制定、执行与结果分析，大幅降低盘点工作量；
5. **数据驱动决策**：通过多维度统计分析与可视化图表，为管理层提供资产状态、分布与趋势的决策依据；
6. **保障数据安全**：通过 JWT 认证、操作日志审计、权限隔离等机制保障系统与数据安全。

### 2.3 项目范围

**范围内（In Scope）：**

- 系统管理：用户、角色、部门、菜单权限管理
- 资产管理：资产分类、资产信息、资产流转记录管理
- 生命周期管理：生命周期追踪、盘点管理、报修管理
- 采购管理：采购单及明细、采购入库管理
- 统计分析：多维度资产统计仪表盘
- 基础设施：JWT 认证、操作日志、Excel 导入导出、API 文档

**范围外（Out of Scope）：**

- 与 ERP 系统的深度集成（仅预留接口）
- 移动端 App（当前版本仅支持 Web 端）
- 资产折旧计算模块（规划于后续版本）
- 资产二维码/条形码扫描入库（规划于后续版本）

### 2.4 技术选型

| 层次     | 技术栈                              |
|----------|-------------------------------------|
| 前端框架 | Vue 3 + TypeScript + Element Plus   |
| 后端框架 | Java 17 + Spring Boot 3.1.5         |
| 安全认证 | Spring Security + JWT               |
| 数据库   | MySQL 8.0                           |
| 缓存     | Redis 7.x                           |
| 文件处理 | Apache POI（Excel 导入/导出）        |
| API 文档 | Springdoc OpenAPI（Swagger 3）      |
| 构建工具 | Maven（后端）/ Vite（前端）         |
| 部署     | Docker + Nginx                      |

---

## 3. 用户角色与权限

### 3.1 角色定义

系统采用 RBAC（基于角色的访问控制）模型，预置以下标准角色，企业可根据实际需求在系统中自定义角色并分配权限。

| 角色名称     | 角色编码         | 说明                                                   |
|--------------|------------------|--------------------------------------------------------|
| 超级管理员   | ROLE_SUPER_ADMIN | 拥有系统全部权限，负责系统初始化配置，通常为 IT 管理员 |
| 系统管理员   | ROLE_ADMIN       | 负责用户、角色、部门、菜单的日常维护管理               |
| 资产管理员   | ROLE_ASSET_MGR   | 负责资产信息维护、资产流转操作、盘点执行               |
| 采购管理员   | ROLE_PURCHASE_MGR| 负责采购单的创建、提交与入库确认                       |
| 部门负责人   | ROLE_DEPT_LEADER | 审批本部门的资产申请、报修申请，查看部门资产报表        |
| 普通员工     | ROLE_USER        | 发起资产使用申请、报修申请，查看个人名下资产            |
| 审计人员     | ROLE_AUDITOR     | 只读权限，可查看所有模块数据及操作日志，不可做任何变更  |

### 3.2 权限矩阵

#### 3.2.1 系统管理权限

| 功能点         | 超级管理员 | 系统管理员 | 资产管理员 | 采购管理员 | 部门负责人 | 普通员工 | 审计人员 |
|----------------|:----------:|:----------:|:----------:|:----------:|:----------:|:--------:|:--------:|
| 用户管理-查看  | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        | ✅        |
| 用户管理-新增  | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        | ❌        |
| 用户管理-编辑  | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        | ❌        |
| 用户管理-删除  | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        | ❌        |
| 角色管理       | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        | ✅(只读)  |
| 部门管理       | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        | ✅(只读)  |
| 菜单权限管理   | ✅          | ❌          | ❌          | ❌          | ❌          | ❌        | ❌        |
| 操作日志查看   | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        | ✅        |

#### 3.2.2 资产管理权限

| 功能点             | 超级管理员 | 系统管理员 | 资产管理员 | 采购管理员 | 部门负责人   | 普通员工       | 审计人员 |
|--------------------|:----------:|:----------:|:----------:|:----------:|:------------:|:--------------:|:--------:|
| 资产分类-查看      | ✅          | ✅          | ✅          | ✅          | ✅            | ✅              | ✅        |
| 资产分类-维护      | ✅          | ✅          | ✅          | ❌          | ❌            | ❌              | ❌        |
| 资产信息-查看全部  | ✅          | ✅          | ✅          | ❌          | ✅(本部门)    | ✅(本人名下)    | ✅        |
| 资产信息-新增      | ✅          | ✅          | ✅          | ❌          | ❌            | ❌              | ❌        |
| 资产信息-编辑      | ✅          | ✅          | ✅          | ❌          | ❌            | ❌              | ❌        |
| 资产信息-删除      | ✅          | ✅          | ✅          | ❌          | ❌            | ❌              | ❌        |
| 资产流转操作       | ✅          | ✅          | ✅          | ❌          | ❌            | ❌              | ❌        |
| 资产导入/导出      | ✅          | ✅          | ✅          | ❌          | ✅(导出)      | ❌              | ✅(导出)  |

#### 3.2.3 生命周期管理权限

| 功能点         | 超级管理员 | 系统管理员 | 资产管理员 | 采购管理员 | 部门负责人 | 普通员工   | 审计人员 |
|----------------|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|:--------:|
| 盘点计划-创建  | ✅          | ✅          | ✅          | ❌          | ❌          | ❌          | ❌        |
| 盘点计划-执行  | ✅          | ✅          | ✅          | ❌          | ✅          | ✅          | ❌        |
| 盘点结果-查看  | ✅          | ✅          | ✅          | ❌          | ✅(本部门)  | ❌          | ✅        |
| 报修申请-发起  | ✅          | ✅          | ✅          | ❌          | ✅          | ✅          | ❌        |
| 报修申请-审批  | ✅          | ✅          | ✅          | ❌          | ✅(本部门)  | ❌          | ❌        |
| 报修进度-查看  | ✅          | ✅          | ✅          | ❌          | ✅(本部门)  | ✅(本人申请)| ✅        |

### 3.3 数据权限说明

系统在功能权限基础上，还支持数据级别的权限控制：

- **全部数据权限**：可查看和操作系统内所有数据（超级管理员、系统管理员）
- **部门数据权限**：只能查看和操作本部门及下属部门的数据（部门负责人）
- **仅本人数据权限**：只能查看和操作本人创建或名下的数据（普通员工）

---

## 4. 功能需求

### 4.1 系统管理模块

#### 4.1.1 用户管理

**功能描述：**

用户管理模块负责维护系统中所有操作人员的账号信息，支持账号的创建、修改、停用及权限绑定，是系统安全访问控制的基础。

**功能列表：**

| 功能编号 | 功能名称   | 优先级 | 说明                               |
|----------|------------|--------|------------------------------------|
| UC-01-01 | 用户列表查询 | 高   | 支持按用户名、姓名、部门、状态筛选，分页展示 |
| UC-01-02 | 新增用户   | 高     | 填写用户基本信息并绑定角色         |
| UC-01-03 | 编辑用户   | 高     | 修改用户信息、角色、部门绑定       |
| UC-01-04 | 删除用户   | 中     | 逻辑删除，不可删除超级管理员账号   |
| UC-01-05 | 启用/禁用  | 高     | 切换账号激活状态，禁用后不可登录   |
| UC-01-06 | 重置密码   | 高     | 将密码重置为系统默认密码（加密存储）|
| UC-01-07 | 绑定部门   | 中     | 设置用户所属部门                   |

**用例详述（UC-01-02 新增用户）：**

- **前置条件：** 操作者具有用户管理新增权限，已完成部门与角色配置
- **输入信息：**

  | 字段名称 | 类型   | 是否必填 | 校验规则                             |
  |----------|--------|----------|--------------------------------------|
  | 用户名   | String | 是       | 4-20位字母数字下划线，全局唯一       |
  | 姓名     | String | 是       | 2-20个字符                           |
  | 密码     | String | 是       | 8-20位，需含大小写字母及数字         |
  | 手机号   | String | 否       | 标准11位手机号格式                   |
  | 邮箱     | String | 否       | 标准邮箱格式                         |
  | 所属部门 | Long   | 是       | 从部门树中选择叶子节点或中间节点     |
  | 角色     | List   | 是       | 可分配多个角色                       |
  | 状态     | Int    | 是       | 0-禁用，1-启用，默认启用             |

- **后置条件：** 新用户创建成功，密码以 BCrypt 加密存储，操作日志记录
- **业务规则：**
  1. 用户名创建后不可修改
  2. 不允许创建与超级管理员同名的账号
  3. 禁用状态的账号不可登录，但其历史数据仍保留

#### 4.1.2 角色管理

**功能描述：**

角色是权限的集合载体。管理员通过角色管理模块定义不同的职责角色，并为每个角色分配对应的菜单及操作权限，再将角色授予具体用户，实现灵活的 RBAC 权限控制。

**功能列表：**

| 功能编号 | 功能名称       | 优先级 | 说明                                 |
|----------|----------------|--------|--------------------------------------|
| UC-02-01 | 角色列表查询   | 高     | 分页展示，支持名称、编码筛选         |
| UC-02-02 | 新增角色       | 高     | 定义角色基本信息                     |
| UC-02-03 | 编辑角色       | 高     | 修改角色名称、描述                   |
| UC-02-04 | 删除角色       | 中     | 已绑定用户的角色不可删除             |
| UC-02-05 | 角色权限分配   | 高     | 通过树形菜单勾选方式分配权限         |

**业务规则：**

1. 角色编码全局唯一，创建后不可修改
2. 内置角色（如 ROLE_SUPER_ADMIN）不可删除和修改权限
3. 权限分配采用树形菜单展示，支持父子联动勾选
4. 一个用户可同时拥有多个角色，权限取各角色权限的并集

#### 4.1.3 部门管理

**功能描述：**

维护企业的组织架构信息，以树形层级结构展现各部门关系，为用户归属、资产使用部门、数据权限控制提供基础数据支撑。

**功能列表：**

| 功能编号 | 功能名称     | 优先级 | 说明                               |
|----------|--------------|--------|------------------------------------|
| UC-03-01 | 部门树查询   | 高     | 以树形结构展示所有部门             |
| UC-03-02 | 新增部门     | 高     | 支持指定父节点，构建层级关系       |
| UC-03-03 | 编辑部门     | 高     | 修改部门名称、负责人、排序         |
| UC-03-04 | 删除部门     | 中     | 下有子部门或绑定用户时禁止删除     |

**业务规则：**

1. 部门层级最多支持 5 级
2. 同一父节点下，部门名称不可重复
3. 被删除部门的历史资产记录仍需保留，部门字段标记为"已撤销"

#### 4.1.4 菜单权限管理

**功能描述：**

菜单权限管理模块维护系统的菜单树及操作按钮权限，支持菜单层级的配置，并细化到按钮级别的操作权限控制。

**功能列表：**

| 功能编号 | 功能名称       | 优先级 | 说明                                   |
|----------|----------------|--------|----------------------------------------|
| UC-04-01 | 菜单树查询     | 高     | 展示完整菜单树及权限标识               |
| UC-04-02 | 新增菜单/按钮  | 高     | 支持目录、菜单、按钮三种类型           |
| UC-04-03 | 编辑菜单/按钮  | 高     | 修改菜单路径、图标、权限标识           |
| UC-04-04 | 删除菜单/按钮  | 中     | 已被角色引用的权限标识不可删除         |

**权限类型说明：**

| 类型 | 说明                                   |
|------|----------------------------------------|
| 目录 | 导航菜单的分组节点，无跳转路径         |
| 菜单 | 实际的页面路由，有对应前端组件路径     |
| 按钮 | 页面内的操作权限，如 `asset:add`       |

---

### 4.2 资产管理模块

#### 4.2.1 资产分类管理

**功能描述：**

资产分类采用树形层级结构，支持对企业所有资产按照类型进行分级分类管理，为资产的统计分析与检索提供标准化分类依据。

**功能列表：**

| 功能编号 | 功能名称     | 优先级 | 说明                               |
|----------|--------------|--------|------------------------------------|
| UC-05-01 | 分类树查询   | 高     | 展示完整分类树                     |
| UC-05-02 | 新增分类     | 高     | 可指定父分类，构建层级             |
| UC-05-03 | 编辑分类     | 高     | 修改分类名称、描述、排序           |
| UC-05-04 | 删除分类     | 中     | 下有子分类或已有资产关联时禁止删除 |

**业务规则：**

1. 分类层级建议不超过 4 级，以保证检索效率
2. 同一父分类下，子分类名称不可重复
3. 叶子节点分类才可直接关联资产

#### 4.2.2 资产信息管理

**功能描述：**

资产信息管理是系统核心模块，负责企业全部固定资产的台账维护，实现资产的登记、查询、修改、报废全流程管理。

**功能列表：**

| 功能编号 | 功能名称       | 优先级 | 说明                               |
|----------|----------------|--------|------------------------------------|
| UC-06-01 | 资产列表查询   | 高     | 多条件筛选，分页展示               |
| UC-06-02 | 新增资产       | 高     | 登记资产基本信息                   |
| UC-06-03 | 编辑资产       | 高     | 修改资产信息（部分字段限制修改）   |
| UC-06-04 | 删除资产       | 中     | 仅处于采购/取消采购状态可删除      |
| UC-06-05 | 资产详情查看   | 高     | 查看资产完整信息及历史流转记录     |
| UC-06-06 | 资产导入       | 高     | 通过 Excel 模板批量导入资产        |
| UC-06-07 | 资产导出       | 高     | 将筛选结果导出为 Excel 文件        |

**资产数据字典：**

| 字段名称   | 字段编码        | 类型        | 是否必填 | 说明                               |
|------------|-----------------|-------------|----------|------------------------------------|
| 资产编号   | assetCode       | String(32)  | 自动生成 | 规则：年份+分类编码+序号，如 `2024-IT-00001` |
| 资产名称   | assetName       | String(100) | 是       | 资产的完整名称                     |
| 资产分类   | categoryId      | Long        | 是       | 关联资产分类，选叶子节点           |
| 采购金额   | purchaseAmount  | Decimal     | 否       | 单位：元，保留2位小数              |
| 采购日期   | purchaseDate    | Date        | 否       | 格式：YYYY-MM-DD                   |
| 使用部门   | deptId          | Long        | 否       | 关联部门                           |
| 责任人     | userId          | Long        | 否       | 关联用户                           |
| 规格型号   | specification   | String(200) | 否       | 资产的规格型号描述                 |
| 生产厂商   | manufacturer    | String(100) | 否       | 生产厂商名称                       |
| 存放地点   | location        | String(200) | 否       | 实物存放位置描述                   |
| 资产状态   | status          | Int         | 是       | 见下方状态说明                     |
| 备注       | remark          | String(500) | 否       | 其他补充说明                       |

**资产状态说明：**

| 状态值 | 状态名称   | 说明                                 | 可转换的目标状态             |
|--------|------------|--------------------------------------|------------------------------|
| 0      | 采购中     | 已提交采购申请，尚未入库             | 1-闲置、6-取消采购           |
| 1      | 闲置       | 已入库，未分配给具体使用人           | 2-使用中、3-维修中、4-报废   |
| 2      | 使用中     | 已分配至部门/责任人，正在使用        | 1-闲置（归还）、3-维修中     |
| 3      | 维修中     | 已送修，正在维修                     | 1-闲置（维修完成）、4-报废   |
| 4      | 已报废     | 资产已报废，终态                     | 无（终态）                   |
| 6      | 取消采购   | 采购申请取消，终态                   | 无（终态）                   |

#### 4.2.3 资产流转记录管理

**功能描述：**

记录资产在其生命周期内的每一次状态变更，形成完整的流转追踪链，保证资产状态变化的可追溯性与合规性。

**流转操作类型：**

| 操作类型编码 | 操作名称   | 触发场景                       | 资产状态变化         |
|:-------------|------------|--------------------------------|----------------------|
| INBOUND      | 入库       | 采购到货，完成验收入库         | 采购中 → 闲置        |
| ASSIGN       | 分配       | 将闲置资产分配给部门/责任人    | 闲置 → 使用中        |
| TRANSFER     | 调拨       | 资产在部门间调拨               | 使用中 → 使用中      |
| RETURN       | 归还       | 使用人将资产归还               | 使用中 → 闲置        |
| SCRAP        | 报废       | 资产达到使用年限或损毁申请报废 | 闲置/使用中 → 已报废 |
| REPAIR       | 送修       | 资产故障，送交维修             | 使用中/闲置 → 维修中 |
| REPAIR_DONE  | 维修完成   | 维修完毕，重新入库             | 维修中 → 闲置        |
| CANCEL       | 取消采购   | 采购申请撤销                   | 采购中 → 取消采购    |

**流转记录数据字典：**

| 字段名称   | 类型        | 说明                               |
|------------|-------------|------------------------------------|
| 记录编号   | String      | 自动生成                           |
| 资产ID     | Long        | 关联资产                           |
| 操作类型   | String      | 见上方操作类型枚举                 |
| 操作前状态 | Int         | 操作前资产状态                     |
| 操作后状态 | Int         | 操作后资产状态                     |
| 源部门     | Long        | 调拨/归还时的来源部门              |
| 目标部门   | Long        | 分配/调拨时的目标部门              |
| 操作人     | Long        | 执行操作的用户                     |
| 操作时间   | DateTime    | 操作发生时间                       |
| 操作备注   | String(500) | 操作原因或补充说明                 |

---

### 4.3 生命周期管理模块

#### 4.3.1 资产生命周期追踪

**功能描述：**

对每项资产从采购申请到最终报废的完整生命周期进行阶段化追踪，以时间线方式直观展示资产在各阶段的停留时间与状态变化，为资产利用率评估和更新决策提供依据。

**生命周期阶段定义：**

| 阶段     | 阶段编码       | 说明                         |
|----------|----------------|------------------------------|
| 采购阶段 | PROCUREMENT    | 从提交采购申请到完成入库     |
| 闲置阶段 | IDLE           | 已入库但未分配使用的阶段     |
| 使用阶段 | IN_USE         | 已分配，正常使用中           |
| 维修阶段 | MAINTENANCE    | 送修到维修完成的阶段         |
| 报废阶段 | SCRAPPED       | 资产生命终结                 |

#### 4.3.2 盘点管理

**功能描述：**

支持资产盘点计划的制定、执行和结果分析，覆盖全面盘点、抽样盘点和专项盘点三种方式，有效解决资产账实不符问题。

**功能列表：**

| 功能编号 | 功能名称         | 优先级 | 说明                                 |
|----------|------------------|--------|--------------------------------------|
| UC-07-01 | 创建盘点计划     | 高     | 设定盘点类型、范围、时间、负责人     |
| UC-07-02 | 发起/开始盘点    | 高     | 将状态变更为"进行中"，生成盘点明细   |
| UC-07-03 | 录入盘点结果     | 高     | 逐项核实确认实物，标记盘盈/盘亏/正常 |
| UC-07-04 | 完成盘点         | 高     | 汇总盘点结果，生成盘点报告           |
| UC-07-05 | 取消盘点         | 中     | 进行中的盘点可取消，需填写原因       |
| UC-07-06 | 盘点历史查询     | 高     | 查看历次盘点记录及结果统计           |

**盘点类型说明：**

| 盘点类型 | 说明                               |
|----------|------------------------------------|
| 全面盘点 | 对企业所有资产进行全量核查         |
| 抽样盘点 | 按照一定比例抽取样本进行核查       |
| 专项盘点 | 对指定部门、分类或资产列表进行核查 |

**盘点状态流转：**

```
计划中 → 进行中 → 已完成
              ↓
           已取消
```

**盘点结果说明：**

| 结果标记 | 说明                         |
|----------|------------------------------|
| 正常     | 账面记录与实物核对一致       |
| 盘盈     | 实物存在但账面无记录         |
| 盘亏     | 账面有记录但实物不存在       |

**业务规则：**

1. 同一时间内，同一范围只能存在一个"进行中"的盘点任务
2. 盘点完成后，系统自动更新资产台账，盘盈资产需补录信息，盘亏资产需发起报废或调查流程
3. 盘点报告需包含：盘点总数、正常数量、盘盈数量、盘亏数量及差异率

#### 4.3.3 报修管理

**功能描述：**

提供完整的资产报修流程，涵盖报修申请提交、主管审批、维修执行、维修完成确认等环节，并记录维修费用与结果，支持维修历史追溯。

**功能列表：**

| 功能编号 | 功能名称         | 优先级 | 说明                               |
|----------|------------------|--------|------------------------------------|
| UC-08-01 | 提交报修申请     | 高     | 员工发起报修，填写故障描述与优先级 |
| UC-08-02 | 审批报修申请     | 高     | 主管审批通过或拒绝                 |
| UC-08-03 | 开始维修         | 高     | 维修人员接单，更新状态为维修中     |
| UC-08-04 | 完成维修         | 高     | 填写维修结果、费用，关闭工单       |
| UC-08-05 | 报修列表查询     | 高     | 多条件筛选，分页查询               |
| UC-08-06 | 报修详情查看     | 高     | 查看完整报修信息及操作历史         |

**报修数据字典：**

| 字段名称   | 字段编码        | 类型        | 是否必填 | 说明                               |
|------------|-----------------|-------------|----------|------------------------------------|
| 报修编号   | repairCode      | String      | 自动生成 | 如：REP-20240601-0001              |
| 资产ID     | assetId         | Long        | 是       | 关联被报修的资产                   |
| 报修类型   | repairType      | Int         | 是       | 0-日常、1-故障、2-预防性           |
| 优先级     | priority        | Int         | 是       | 0-低、1-普通、2-紧急               |
| 故障描述   | faultDesc       | String(500) | 是       | 详细描述故障现象                   |
| 报修人     | reportUserId    | Long        | 是       | 发起报修的用户                     |
| 报修时间   | reportTime      | DateTime    | 自动填充 | 提交时间                           |
| 审批人     | approveUserId   | Long        | 否       | 审批该报修申请的用户               |
| 审批时间   | approveTime     | DateTime    | 否       | 审批操作时间                       |
| 审批意见   | approveComment  | String(200) | 否       | 通过或拒绝的说明                   |
| 维修人     | maintUserId     | Long        | 否       | 执行维修的技术人员                 |
| 维修开始时间 | maintStartTime | DateTime  | 否       | 开始维修时间                       |
| 维修完成时间 | maintEndTime   | DateTime  | 否       | 维修完成时间                       |
| 维修费用   | maintCost       | Decimal     | 否       | 实际维修费用，单位：元             |
| 维修结果   | maintResult     | String(500) | 否       | 描述维修处理结果                   |
| 状态       | status          | Int         | 是       | 见下方状态说明                     |

**报修状态流转：**

```
待审批 → 已审批 → 维修中 → 已完成
   ↓
 已拒绝
```

**业务规则：**

1. 处于"维修中"状态的资产，资产状态自动变更为"维修中（3）"
2. 维修完成后，资产状态自动变更回"闲置（1）"
3. 紧急优先级的报修申请，系统需向审批人发送提醒通知
4. 单次维修费用超过设定阈值（默认5000元）需上级额外审批

---

### 4.4 采购管理模块

#### 4.4.1 采购单管理

**功能描述：**

管理资产采购的全流程，从采购申请的创建、多级审批，到货物到达后的入库确认，为资产台账的扩充提供标准化的数据来源。

**功能列表：**

| 功能编号 | 功能名称         | 优先级 | 说明                                 |
|----------|------------------|--------|--------------------------------------|
| UC-09-01 | 创建采购单       | 高     | 填写供应商、预计采购日期、采购明细   |
| UC-09-02 | 编辑采购单       | 高     | 仅草稿状态可编辑                     |
| UC-09-03 | 提交审批         | 高     | 将草稿单提交至审批流程               |
| UC-09-04 | 审批采购单       | 高     | 授权用户执行审批通过或驳回操作       |
| UC-09-05 | 采购入库（单件） | 高     | 对采购明细逐项确认入库               |
| UC-09-06 | 采购入库（批量） | 高     | 一次性对整个采购单执行批量入库       |
| UC-09-07 | 取消采购单       | 中     | 取消未入库的采购申请                 |
| UC-09-08 | 采购单查询       | 高     | 多条件筛选，分页查询                 |

**采购单数据字典：**

| 字段名称   | 字段编码        | 类型        | 是否必填 | 说明                               |
|------------|-----------------|-------------|----------|------------------------------------|
| 采购编号   | orderCode       | String      | 自动生成 | 如：PO-2024-00001                  |
| 供应商     | supplier        | String(100) | 是       | 供应商名称                         |
| 采购日期   | purchaseDate    | Date        | 是       | 计划采购日期                       |
| 采购总金额 | totalAmount     | Decimal     | 自动计算 | 由明细汇总计算，单位：元           |
| 申请人     | applyUserId     | Long        | 自动填充 | 当前登录用户                       |
| 审批人     | approveUserId   | Long        | 否       | 执行审批的用户                     |
| 状态       | status          | Int         | 是       | 0-草稿、1-待审批、2-已审批、3-部分入库、4-全部入库、5-已取消 |
| 备注       | remark          | String(500) | 否       | 采购说明                           |

**采购明细数据字典：**

| 字段名称   | 字段编码      | 类型        | 是否必填 | 说明                 |
|------------|---------------|-------------|----------|----------------------|
| 明细ID     | id            | Long        | 自动生成 |                      |
| 采购单ID   | orderId       | Long        | 是       | 关联采购单           |
| 资产名称   | assetName     | String(100) | 是       | 计划采购的资产名称   |
| 资产分类   | categoryId    | Long        | 是       | 关联分类             |
| 规格型号   | specification | String(200) | 否       |                      |
| 数量       | quantity      | Int         | 是       | 计划采购数量，≥1     |
| 单价       | unitPrice     | Decimal     | 是       | 含税单价，单位：元   |
| 小计       | subtotal      | Decimal     | 自动计算 | 数量 × 单价          |
| 入库数量   | inboundQty    | Int         | 否       | 已实际入库的数量     |

**采购状态流转：**

```
草稿 → 待审批 → 已审批 → 部分入库 → 全部入库
                  ↓
               已取消
```

**业务规则：**

1. 采购入库时，系统自动为每项资产生成唯一资产编号并创建资产记录，初始状态为"闲置"
2. 批量入库时，若数量为N，则创建N条资产记录
3. 采购单一旦提交审批，明细不可修改
4. 采购金额超过10万元时，需要二级审批（部门负责人+财务负责人）

---

### 4.5 统计分析模块（仪表盘）

**功能描述：**

通过可视化图表与数据卡片的方式，为管理层和资产管理员提供资产运营状况的全局视图，支持多维度的数据分析与趋势研判。

**功能列表：**

| 功能编号 | 功能名称         | 优先级 | 图表类型     | 说明                               |
|----------|------------------|--------|--------------|--------------------------------------|
| UC-10-01 | 资产概览统计     | 高     | 数字卡片     | 展示资产总数、各状态数量、本月新增  |
| UC-10-02 | 部门资产分布     | 高     | 柱状图       | 各部门持有资产数量与金额对比         |
| UC-10-03 | 分类资产分布     | 高     | 饼图/环形图  | 各分类资产数量占比                   |
| UC-10-04 | 资产状态分布     | 高     | 饼图         | 各状态资产数量比例                   |
| UC-10-05 | 资产新增趋势     | 高     | 折线图       | 按月展示过去12个月的资产新增趋势     |
| UC-10-06 | 维修费用统计     | 中     | 柱状图/折线图| 按月统计维修费用及次数               |
| UC-10-07 | 采购金额趋势     | 中     | 折线图       | 按月展示采购金额变化趋势             |

**资产概览统计卡片详情：**

| 卡片名称       | 统计口径                     |
|----------------|------------------------------|
| 资产总数       | 所有非取消采购状态的资产数量 |
| 闲置资产       | 状态为"闲置"的资产数量       |
| 使用中资产     | 状态为"使用中"的资产数量     |
| 维修中资产     | 状态为"维修中"的资产数量     |
| 本月新增       | 当月新入库的资产数量         |
| 资产总价值     | 所有在用资产采购金额总和     |

**业务规则：**

1. 仪表盘数据基于实时计算，刷新周期不超过5分钟（利用 Redis 缓存）
2. 不同角色看到的数据范围与其数据权限一致（普通员工只看本人，部门负责人只看本部门）
3. 图表支持钻取操作，点击数据项可跳转到对应的资产列表页

---

### 4.6 系统基础功能

#### 4.6.1 用户登录与认证

| 功能编号 | 功能名称     | 说明                                           |
|----------|--------------|------------------------------------------------|
| UC-11-01 | 用户登录     | 用户名+密码登录，返回 JWT Token（有效期7天）   |
| UC-11-02 | 登出         | 服务端使 Token 加入黑名单（Redis 存储）        |
| UC-11-03 | 获取用户信息 | 获取当前登录用户的基本信息及权限列表           |
| UC-11-04 | 修改密码     | 验证旧密码后设置新密码                         |
| UC-11-05 | Token 刷新   | 在 Token 过期前，使用旧 Token 换取新 Token     |

#### 4.6.2 操作日志

系统通过 AOP 自动记录用户的关键操作行为，日志信息包含：

| 字段         | 说明                               |
|--------------|------------------------------------|
| 操作用户     | 执行操作的用户名和姓名             |
| 操作时间     | 操作发生的精确时间戳               |
| 操作模块     | 所属业务模块（如：资产管理）       |
| 操作类型     | 操作类别（新增/修改/删除/查询）    |
| 操作描述     | 具体操作描述（如：新增资产编号xxx）|
| 请求方法     | HTTP 方法及接口路径                |
| 请求参数     | 请求体参数（脱敏处理后）           |
| 响应结果     | 成功/失败及错误信息                |
| 操作IP       | 客户端 IP 地址                     |
| 耗时         | 请求处理耗时（毫秒）               |

#### 4.6.3 Excel 导入导出

- **导出**：支持将资产列表、盘点明细、报修记录等数据导出为 .xlsx 格式，支持字段自定义
- **导入**：提供标准导入模板下载，对导入数据进行格式校验、业务规则校验，输出错误报告
- **容量限制**：单次导入不超过 5000 条，单个文件不超过 10MB

---

## 5. 非功能需求

### 5.1 性能需求

| 性能指标           | 要求                                               |
|--------------------|----------------------------------------------------|
| 页面响应时间       | 普通查询接口 ≤ 500ms，复杂统计接口 ≤ 2s（P95）     |
| 并发用户数         | 支持 200 个并发用户同时在线操作                    |
| 系统吞吐量         | 核心接口 TPS ≥ 100                                 |
| Excel 导出响应     | 10000条数据导出耗时 ≤ 30s                          |
| 数据库查询         | 单次 SQL 执行时间 ≤ 100ms（已建索引查询）          |
| 页面首次加载       | 前端资源首次加载（含缓存）≤ 3s（带宽 10Mbps 环境）|

### 5.2 安全需求

| 安全要求           | 详细说明                                                                 |
|--------------------|--------------------------------------------------------------------------|
| 身份认证           | 所有 API 接口（除登录外）均需 JWT Token 认证                             |
| Token 安全         | JWT 采用 HS256 算法签名，密钥长度 ≥ 256 位，Token 有效期 7 天            |
| 密码安全           | 密码使用 BCrypt 加密存储，禁止明文传输和存储，强制密码复杂度规则         |
| 权限控制           | 基于 Spring Security + 自定义权限注解，实现接口级和数据级双重权限控制    |
| SQL 注入防护       | 使用 MyBatis 参数化查询，禁止字符串拼接 SQL                              |
| XSS 防护           | 对所有用户输入进行 HTML 实体转义，前端使用 Content Security Policy       |
| CSRF 防护          | 由于采用 JWT 无状态认证，天然防御 CSRF 攻击                              |
| 传输加密           | 生产环境强制使用 HTTPS（TLS 1.2+）                                       |
| 操作审计           | 所有增删改操作自动记录操作日志，日志不可删除                             |
| 登录安全           | 连续5次密码错误后，账号锁定30分钟                                        |
| 敏感数据脱敏       | 操作日志中的手机号、邮箱等敏感字段做脱敏处理（如：138****5678）          |

### 5.3 可靠性需求

| 可靠性指标   | 要求                                                     |
|--------------|----------------------------------------------------------|
| 系统可用性   | 年可用率 ≥ 99.5%（排除计划内维护时间）                   |
| 数据持久性   | 数据库每日全量备份，增量备份每小时执行，保留最近30天备份 |
| 故障恢复     | 发生故障后 RTO（恢复时间目标）≤ 4小时，RPO（恢复点目标）≤ 1小时 |
| 事务完整性   | 涉及多表变更的业务操作使用数据库事务保证原子性            |
| 幂等性       | 关键写操作（如资产入库）需保证幂等，防止重复提交          |

### 5.4 易用性需求

| 易用性要求     | 详细说明                                                 |
|----------------|----------------------------------------------------------|
| 操作一致性     | 相同类型的操作在不同模块保持一致的交互设计               |
| 错误提示       | 表单校验错误信息明确定位到具体字段，并提供修正提示       |
| 加载反馈       | 所有异步操作提供 Loading 动画反馈，超过 3s 显示超时提示  |
| 浏览器兼容性   | 支持 Chrome 90+、Firefox 88+、Edge 90+（不支持 IE）      |
| 屏幕分辨率     | 最低支持 1280×768 分辨率，推荐 1920×1080                 |
| 国际化         | 当前版本仅支持简体中文，预留国际化扩展接口               |
| 操作效率       | 常用操作入口不超过3次点击可达                            |

### 5.5 可维护性需求

| 可维护性要求   | 详细说明                                                 |
|----------------|----------------------------------------------------------|
| 代码规范       | 后端遵循《阿里巴巴 Java 开发手册》，前端遵循 ESLint 规则 |
| 接口文档       | 使用 Swagger/OpenAPI 3.0 自动生成接口文档并保持同步     |
| 日志规范       | 使用 Logback 分级日志，ERROR/WARN 级日志保留60天         |
| 配置管理       | 敏感配置（如数据库密码）通过环境变量注入，不硬编码       |
| 版本控制       | 使用 Git 进行代码版本管理，采用 GitFlow 分支策略         |
| 部署文档       | 提供完整的部署手册和运维手册                             |
| 单元测试覆盖率 | 核心业务逻辑单元测试覆盖率 ≥ 60%                         |

### 5.6 可扩展性需求

1. 系统架构采用前后端分离，后端提供标准 RESTful API，支持后续移动端接入
2. 业务模块设计保持低耦合，新功能模块可独立开发集成
3. 数据库设计预留扩展字段，避免因业务变更频繁修改表结构
4. 资产编号规则、状态枚举等参数支持通过系统配置表动态调整

---

## 6. 数据需求

### 6.1 核心数据实体

#### 6.1.1 实体关系概览

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   sys_user  │N───1│  sys_dept   │     │  sys_role   │
└─────────────┘     └─────────────┘     └─────────────┘
       │N                                      │1
       └──────────────N────────────────────────┘
              sys_user_role（中间表）

┌──────────────────┐    ┌─────────────────┐
│  asset_category  │1──N│     asset        │
└──────────────────┘    └─────────────────┘
                                │1
              ┌─────────────────┼──────────────────────┐
              │N                │N                      │N
    ┌──────────────┐  ┌──────────────────┐  ┌─────────────────┐
    │ asset_record │  │ asset_lifecycle  │  │  asset_repair   │
    └──────────────┘  └──────────────────┘  └─────────────────┘

┌─────────────────┐    ┌────────────────────────┐
│ purchase_order  │1──N│ purchase_order_detail  │
└─────────────────┘    └────────────────────────┘

┌──────────────────┐    ┌───────────────────────────┐
│ asset_inventory  │1──N│ asset_inventory_detail    │
└──────────────────┘    └───────────────────────────┘
```

### 6.2 数据实体详细定义

#### 6.2.1 系统用户（sys_user）

| 字段名        | 类型           | 约束              | 说明                 |
|---------------|----------------|-------------------|----------------------|
| id            | BIGINT         | PK, AUTO          | 主键                 |
| username      | VARCHAR(50)    | UNIQUE, NOT NULL  | 登录用户名           |
| real_name     | VARCHAR(50)    | NOT NULL          | 真实姓名             |
| password      | VARCHAR(100)   | NOT NULL          | BCrypt 加密密码      |
| phone         | VARCHAR(20)    | NULL              | 手机号               |
| email         | VARCHAR(100)   | NULL              | 邮箱                 |
| dept_id       | BIGINT         | FK                | 所属部门             |
| status        | TINYINT        | DEFAULT 1         | 0-禁用，1-启用       |
| create_time   | DATETIME       | NOT NULL          | 创建时间             |
| update_time   | DATETIME       | NOT NULL          | 更新时间             |
| create_by     | BIGINT         | NULL              | 创建人               |
| is_deleted    | TINYINT        | DEFAULT 0         | 逻辑删除标记         |

#### 6.2.2 资产主表（asset）

| 字段名          | 类型            | 约束             | 说明                       |
|-----------------|-----------------|------------------|----------------------------|
| id              | BIGINT          | PK, AUTO         | 主键                       |
| asset_code      | VARCHAR(32)     | UNIQUE, NOT NULL | 资产编号（系统自动生成）   |
| asset_name      | VARCHAR(100)    | NOT NULL         | 资产名称                   |
| category_id     | BIGINT          | FK, NOT NULL     | 资产分类                   |
| purchase_amount | DECIMAL(12, 2)  | NULL             | 采购金额                   |
| purchase_date   | DATE            | NULL             | 采购日期                   |
| dept_id         | BIGINT          | FK               | 使用部门                   |
| user_id         | BIGINT          | FK               | 责任人                     |
| specification   | VARCHAR(200)    | NULL             | 规格型号                   |
| manufacturer    | VARCHAR(100)    | NULL             | 生产厂商                   |
| location        | VARCHAR(200)    | NULL             | 存放地点                   |
| status          | TINYINT         | NOT NULL         | 资产状态（见状态枚举）     |
| remark          | VARCHAR(500)    | NULL             | 备注                       |
| create_time     | DATETIME        | NOT NULL         | 创建时间                   |
| update_time     | DATETIME        | NOT NULL         | 更新时间                   |
| create_by       | BIGINT          | NULL             | 创建人                     |
| is_deleted      | TINYINT         | DEFAULT 0        | 逻辑删除标记               |

**索引设计：**

| 索引名称                  | 字段                      | 类型   | 说明                     |
|---------------------------|---------------------------|--------|--------------------------|
| uk_asset_code             | asset_code                | UNIQUE | 资产编号唯一索引         |
| idx_asset_category        | category_id               | INDEX  | 按分类查询               |
| idx_asset_dept            | dept_id                   | INDEX  | 按部门查询               |
| idx_asset_status          | status                    | INDEX  | 按状态筛选               |
| idx_asset_purchase_date   | purchase_date             | INDEX  | 按采购日期范围查询       |

#### 6.2.3 采购单（purchase_order）

| 字段名          | 类型            | 约束             | 说明                       |
|-----------------|-----------------|------------------|----------------------------|
| id              | BIGINT          | PK, AUTO         | 主键                       |
| order_code      | VARCHAR(32)     | UNIQUE, NOT NULL | 采购编号                   |
| supplier        | VARCHAR(100)    | NOT NULL         | 供应商名称                 |
| purchase_date   | DATE            | NOT NULL         | 采购日期                   |
| total_amount    | DECIMAL(15, 2)  | NOT NULL         | 采购总金额                 |
| status          | TINYINT         | NOT NULL         | 采购状态                   |
| apply_user_id   | BIGINT          | FK, NOT NULL     | 申请人                     |
| approve_user_id | BIGINT          | FK               | 审批人                     |
| approve_time    | DATETIME        | NULL             | 审批时间                   |
| remark          | VARCHAR(500)    | NULL             | 备注                       |
| create_time     | DATETIME        | NOT NULL         | 创建时间                   |
| update_time     | DATETIME        | NOT NULL         | 更新时间                   |

#### 6.2.4 盘点管理（asset_inventory）

| 字段名        | 类型         | 约束             | 说明                                       |
|---------------|--------------|------------------|--------------------------------------------|
| id            | BIGINT       | PK, AUTO         | 主键                                       |
| inventory_code| VARCHAR(32)  | UNIQUE, NOT NULL | 盘点编号                                   |
| inventory_name| VARCHAR(100) | NOT NULL         | 盘点名称                                   |
| inventory_type| TINYINT      | NOT NULL         | 0-全面，1-抽样，2-专项                     |
| status        | TINYINT      | NOT NULL         | 0-计划中，1-进行中，2-已完成，3-已取消     |
| dept_id       | BIGINT       | FK               | 盘点范围（部门，为空则全部）               |
| plan_start    | DATE         | NOT NULL         | 计划开始日期                               |
| plan_end      | DATE         | NOT NULL         | 计划结束日期                               |
| actual_start  | DATETIME     | NULL             | 实际开始时间                               |
| actual_end    | DATETIME     | NULL             | 实际完成时间                               |
| principal_id  | BIGINT       | FK, NOT NULL     | 负责人                                     |
| total_count   | INT          | NULL             | 盘点总数量                                 |
| normal_count  | INT          | NULL             | 正常数量                                   |
| profit_count  | INT          | NULL             | 盘盈数量                                   |
| loss_count    | INT          | NULL             | 盘亏数量                                   |
| remark        | VARCHAR(500) | NULL             | 备注                                       |
| create_time   | DATETIME     | NOT NULL         | 创建时间                                   |

### 6.3 数据保留策略

| 数据类型       | 保留策略                                         |
|----------------|--------------------------------------------------|
| 资产主数据     | 永久保留，报废资产仅变更状态，不物理删除         |
| 资产流转记录   | 永久保留，不可修改，不可删除                     |
| 操作日志       | 至少保留2年，2年后归档至冷存储                   |
| 盘点历史       | 永久保留                                         |
| 报修记录       | 永久保留                                         |
| 登录日志       | 保留1年                                          |

---

## 7. 接口需求

### 7.1 接口设计规范

系统后端提供标准 RESTful API，遵循以下设计原则：

1. **URL 命名**：使用小写字母和连字符，名词复数形式，如 `/api/v1/assets`
2. **HTTP 方法**：GET（查询）、POST（创建）、PUT（全量更新）、PATCH（部分更新）、DELETE（删除）
3. **统一响应格式**：

```json
{
  "code": 200,
  "message": "操作成功",
  "data": {},
  "timestamp": 1717200000000
}
```

4. **分页响应格式**：

```json
{
  "code": 200,
  "message": "查询成功",
  "data": {
    "records": [],
    "total": 100,
    "current": 1,
    "size": 20
  }
}
```

5. **错误码规范**：

| 错误码 | 说明                           |
|--------|--------------------------------|
| 200    | 成功                           |
| 400    | 请求参数错误                   |
| 401    | 未认证或 Token 已过期          |
| 403    | 无权限访问该资源               |
| 404    | 资源不存在                     |
| 409    | 资源冲突（如重复编号）         |
| 500    | 服务器内部错误                 |

### 7.2 核心接口列表

#### 7.2.1 认证接口

| 方法 | 路径               | 说明             | 认证要求 |
|------|--------------------|------------------|----------|
| POST | /api/v1/auth/login | 用户登录获取Token| 无       |
| POST | /api/v1/auth/logout| 用户登出         | 需要     |
| GET  | /api/v1/auth/info  | 获取当前用户信息 | 需要     |
| PUT  | /api/v1/auth/password | 修改密码      | 需要     |

#### 7.2.2 资产管理接口

| 方法   | 路径                        | 说明             | 所需权限       |
|--------|-----------------------------|------------------|----------------|
| GET    | /api/v1/assets              | 资产列表分页查询 | asset:list     |
| GET    | /api/v1/assets/{id}         | 资产详情         | asset:list     |
| POST   | /api/v1/assets              | 新增资产         | asset:add      |
| PUT    | /api/v1/assets/{id}         | 编辑资产         | asset:edit     |
| DELETE | /api/v1/assets/{id}         | 删除资产         | asset:delete   |
| POST   | /api/v1/assets/import       | Excel 批量导入   | asset:import   |
| GET    | /api/v1/assets/export       | 导出资产列表     | asset:export   |
| POST   | /api/v1/assets/{id}/operate | 资产流转操作     | asset:operate  |

#### 7.2.3 采购管理接口

| 方法   | 路径                              | 说明             | 所需权限          |
|--------|-----------------------------------|------------------|-------------------|
| GET    | /api/v1/purchase-orders           | 采购单列表       | purchase:list     |
| POST   | /api/v1/purchase-orders           | 创建采购单       | purchase:add      |
| PUT    | /api/v1/purchase-orders/{id}      | 编辑采购单       | purchase:edit     |
| POST   | /api/v1/purchase-orders/{id}/submit | 提交审批       | purchase:submit   |
| POST   | /api/v1/purchase-orders/{id}/approve | 审批采购单    | purchase:approve  |
| POST   | /api/v1/purchase-orders/{id}/inbound | 采购入库      | purchase:inbound  |

#### 7.2.4 统计分析接口

| 方法 | 路径                           | 说明               |
|------|--------------------------------|--------------------|
| GET  | /api/v1/dashboard/overview     | 资产概览统计数据   |
| GET  | /api/v1/dashboard/dept-dist    | 部门资产分布       |
| GET  | /api/v1/dashboard/category-dist| 分类资产分布       |
| GET  | /api/v1/dashboard/status-dist  | 资产状态分布       |
| GET  | /api/v1/dashboard/trend        | 资产新增趋势       |

### 7.3 外部集成接口

系统预留以下外部系统集成接口，当前版本实现为存根（Stub），供后续集成使用：

| 接口名称       | 方向     | 说明                                   |
|----------------|----------|----------------------------------------|
| ERP 同步接口   | 双向     | 与 ERP 系统同步资产折旧、会计凭证数据  |
| 统一认证（SSO）| 入方向   | 支持企业 SSO 单点登录（OAuth 2.0）     |
| 消息通知       | 出方向   | 向企业微信/钉钉推送审批提醒通知        |

---

## 8. 约束条件

### 8.1 技术约束

| 约束项         | 约束内容                                                   |
|----------------|------------------------------------------------------------|
| 开发语言       | 后端强制使用 Java 17，不允许使用 Java 8 特有的已过期 API   |
| 框架版本       | Spring Boot 版本锁定为 3.1.5，不得随意升级                 |
| 前端框架       | 前端使用 Vue 3 + TypeScript，不允许使用 Options API 风格   |
| 数据库         | 关系型数据库使用 MySQL 8.0，字符集统一为 utf8mb4            |
| 缓存           | 缓存层统一使用 Redis，不允许使用本地内存缓存（Caffeine 仅辅助）|
| 容器化         | 生产环境必须以 Docker 容器方式部署，提供 docker-compose 配置 |
| API 版本       | 所有接口路径以 `/api/v1` 开头，便于后续多版本管理          |
| 文件上传大小   | 单次上传文件（含 Excel）不超过 50MB                        |

### 8.2 业务约束

1. **资产编号唯一性**：资产编号一经生成不可修改，确保全系统唯一
2. **状态不可逆转**：报废（4）和取消采购（6）为终态，不可恢复至其他状态
3. **历史记录不可篡改**：流转记录、操作日志一旦写入，不允许通过系统接口修改或删除
4. **删除限制**：有关联业务数据的主数据（用户、部门、分类）不允许物理删除，只能逻辑删除
5. **采购与资产关联**：通过采购入库创建的资产记录，必须保留与采购单的关联关系，不可解除
6. **权限最小化原则**：新建用户默认不分配任何权限，由管理员显式授权
7. **数据一致性**：资产状态与流转记录必须保持严格一致，任何状态变更必须通过流转操作实现，不允许直接修改状态字段

### 8.3 合规约束

1. 系统需满足企业《固定资产管理制度》的相关规定
2. 资产报废需经过多级审批，并留存审批记录，以备财务审计
3. 系统敏感操作（如批量删除、权限变更）须有操作日志可追溯，日志保留期不低于《网络安全法》要求的6个月（本系统要求保留2年）
4. 用户密码管理需符合企业信息安全规范，禁止明文存储

### 8.4 时间与资源约束

| 约束项     | 说明                                             |
|------------|--------------------------------------------------|
| 项目周期   | 系统一期开发周期为 6 个月                        |
| 服务器资源 | 生产环境最低配置：4核 CPU、8GB 内存、200GB SSD   |
| 网络带宽   | 服务器出口带宽不低于 100Mbps                     |
| 团队规模   | 后端开发 2 人、前端开发 2 人、测试 1 人          |

---

*本文档为 EAMS 系统的正式需求规格说明书，版本 V1.0.0，如需变更请走正式的需求变更流程。*

*文档维护：技术团队 | 最后更新：2024-06-01*
